(()=>{"use strict";(()=>{const e=(e=document,t)=>e.querySelector(t);function t(){const e=this.node,t=Array.from((new DOMParser).parseFromString(this.template(),"text/html").body.children),s=new DocumentFragment;s.append(...t),e.after(s),this.node=e.nextSibling;const n=e.classList.value.trim(),i=this.node.classList.value.trim(),a=n!==i&&i||n;a?(this.node.className=a,e.remove()):e.remove()}var s=function(e,t,s,n){return new(s||(s=Promise))((function(i,a){function r(e){try{o(n.next(e))}catch(e){a(e)}}function l(e){try{o(n.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,l)}o((n=n.apply(e,t||[])).next())}))};class n{constructor({node:e,initalState:t,renderStateKey:s=[]}){this.node=e,this.initalState=t,this.renderStateKey=new Set(s),this.subscribers=new Set([]),this.isNeedRender=!1,this.isNeedUpdate=!1,this.setup(),this.render()}setup(){}render(){window.requestAnimationFrame((()=>{t.call(this),this.setEvent(),this.renderChildComponent()}))}updater(){this.isNeedRender?(this.clearEvent(),this.render()):this.renderChildComponent()}renderChildComponent(){}setEvent(){}clearEvent(){}template(){return""}subscribe(...e){e.forEach((e=>{this.subscribers.add(e)}))}notify(e){Array.from(this.subscribers).forEach((t=>{t.setState(e),t.updater(),t.isNeedRender=!1}))}setState(e){this.checkUpdataState(e),this.isNeedUpdate&&(this.reflectNeedRender(e),this.reflectState(e),this.notify(e),((e,t)=>{try{localStorage.setItem("searchState",JSON.stringify(t))}catch(e){throw new Error("저장이 되지 않았습니다!")}})(0,this.initalState))}checkUpdataState(e){const t=JSON.stringify(Object.assign({},this.initalState)),s=JSON.stringify(Object.assign(Object.assign({},this.initalState),e));this.isNeedUpdate=t!==s}reflectNeedRender(e){const t=Object.keys(e),s=Array.from(this.renderStateKey),n=t.filter((e=>s.includes(e)));this.isNeedRender=0===n.length}reflectState(e){Object.keys(e).forEach((t=>{const s=t;this.initalState[s]=e[s]}))}}const i={SearchInput__input:"oZFdS8AMjR5RMYyBNvKV"};class a extends n{template(){const{SearchInput__input:e}=i,{keyword:t}=this.initalState;return`\n      <input class='${e}' type='text' placeholder='웹툰제목, 작가이름으로 검색' value='${t}'/>\n    `}setup(){const{onInput:e}=this.initalState;this.handleInput=t=>{e(t.target.value)},this.handleFocus=()=>{this.node.focus()}}setEvent(){this.node.addEventListener("input",this.handleInput),this.handleFocus()}clearEvent(){this.node.removeEventListener("input",this.handleInput)}}const r={result_list:"hjCdco27lJJTo2oyRN5w",selected:"yqBqWxiR9AStGB58rLfS",matched:"OAf5JwkD9oSOJWplWK_0"};class l extends n{template(){var e;const{selectedIndex:t,isResultListVisiable:s,listData:n,keyword:i}=this.initalState,{result_list:a,selected:l,matched:o}=r,c=(e,t)=>{if(!e.includes(t))return e;const s=e.match(new RegExp(t,"gi"))[0];return e.replace(new RegExp(s,"gi"),`<span class='${o}'>${s}</span>`)};return`\n      <ul class='${s?`${a}`:"hide"}'>${null===(e=Array.from(n))||void 0===e?void 0:e.map(((e,s)=>`<li class='${s===t?`${l}`:""}' data-index='${s}'>\n              <span>${c(e.title,i)}</span>\n              <span>[ ${c(e.author,i)} ] </span>\n            </li>`)).join("")}\n      </ul>\n    `}setup(){const{onClick:e}=this.initalState;this.handleClick=t=>{const s=t.target.closest("li");if(s){const{index:t}=s.dataset;e(this.initalState.listData[parseInt(t)],t)}}}setEvent(){this.node.addEventListener("click",this.handleClick);const{selectedIndex:e}=this.initalState;(e>0&&e<=3||0===e)&&this.node.scrollTo(0,0),e>3&&this.node.scrollTo(0,40.5*(e-3))}clearEvent(){this.node.removeEventListener("click",this.handleClick)}}class o extends n{template(){const{isModalVisiable:e,selectedItem:t}=this.initalState;return`\n    <div class='${e?"item_info":"hide"}' >\n      <div class='modal'>\n        <button>X</button> \n        <a href='${t.url}' target='_blank'>\n          <img src='${t.img}' />\n        </a>\n        <p>웹툰 제목: ${t.title}</p>\n        <p>작가: ${t.author}</p>\n        <p>연재 사이트: ${t.service}</p>\n      </div>\n    </div>\n    `}}new class extends n{constructor({node:e}){super({node:e,initalState:{keyword:"",selectedIndex:0,listData:[],selectedItem:{},isResultListVisiable:!1,isModalVisiable:!1}})}setup(){this.setState(Object.assign(Object.assign({},this.initalState),(e=>{try{const e=localStorage.getItem("searchState");return e?JSON.parse(e):[]}catch(e){throw new Error(e)}})())),this.handleChange=((e,t)=>{let s;return t=>{s&&clearTimeout(s),s=window.setTimeout(e,200,t)}})((e=>{return t=this,n=void 0,a=function*(){const t=yield(e=>s(void 0,void 0,void 0,(function*(){return t=`https://korea-webtoon-api.herokuapp.com/search?keyword=${e}`,s(void 0,void 0,void 0,(function*(){try{const e=yield fetch(t);if(!e.ok)throw new Error("서버와의 연결이 불안정합니다!");return(yield e.json()).webtoons}catch(e){console.error(`에러가 발생했습니다! ${e.message}`)}}));var t})))(e);e&&t.length?this.setState({isResultListVisiable:!0,listData:t,keyword:e}):this.setState({isResultListVisiable:!1,selectedIndex:0,keyword:"",listData:[],selectedItem:{}})},new((i=void 0)||(i=Promise))((function(e,s){function r(e){try{o(a.next(e))}catch(e){s(e)}}function l(e){try{o(a.throw(e))}catch(e){s(e)}}function o(t){var s;t.done?e(t.value):(s=t.value,s instanceof i?s:new i((function(e){e(s)}))).then(r,l)}o((a=a.apply(t,n||[])).next())}));var t,n,i,a})),this.handleKeyChange=e=>{const{listData:t,selectedIndex:s}=this.initalState;if(["ArrowUp","ArrowDown","Enter","Escape"].includes(e.key)&&!t.length)return;const n=t.length-1;let i=s;switch(e.key){case"ArrowUp":i=0===s?n:i-1,this.setState({selectedIndex:i});break;case"ArrowDown":i=s===n?0:i+1,this.setState({selectedIndex:i});break;case"Enter":e.preventDefault(),this.setState({selectedItem:t[s],isModalVisiable:!0});break;case"Escape":this.setState({isModalVisiable:!1})}},this.handleClick=e=>{(e.target.closest("button")||e.target.classList.contains("item_info"))&&this.setState({isModalVisiable:!1})}}template(){return"\n      <main id='root'>\n        <header class='header'>Webtoons Search</header>\n        <div class='container'>\n          <SearchInput></SearchInput>\n          <SearchResultList></SearchResultList>\n          <SearchItemInfo></SearchItemInfo>\n        </div>\n      </main>\n  "}renderChildComponent(){const{keyword:t,selectedIndex:s,listData:n,isResultListVisiable:i,selectedItem:r,isModalVisiable:c}=this.initalState;new a({node:e(this.node,"SearchInput"),initalState:{keyword:this.initalState.keyword,onInput:this.handleChange}});const d=new l({node:e(this.node,"SearchResultList"),initalState:{keyword:t,listData:n,isResultListVisiable:i,selectedIndex:s,onClick:(e,t)=>{this.setState({selectedItem:e,isModalVisiable:!0,selectedIndex:Number(t)})}}}),h=new o({node:e(this.node,"SearchItemInfo"),initalState:{selectedItem:r,isModalVisiable:c}});this.subscribe(d),this.subscribe(h)}setEvent(){window.addEventListener("keyup",this.handleKeyChange),this.node.addEventListener("click",this.handleClick)}clearEvent(){window.removeEventListener("keyup",this.handleKeyChange),this.node.removeEventListener("click",this.handleClick)}}({node:e(document,"#root"),initalState:null})})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFpQixFQUNqQnpCLGNBQWV1RCxPQUFPMUMsSUFDdEIsS0FLRjJDLEVBQWlCLElBQUloQyxFQUFlLENBQ3hDdEcsS0FBTVIsRUFBU08sS0FBS0MsS0FBTSxrQkFDMUJ3QixZQUFhLENBQ1hnRixlQUNBRCxxQkFJSnhHLEtBQUt3QyxVQUFVNkYsR0FDZnJJLEtBQUt3QyxVQUFVK0YsRUFDakIsQ0FFQW5HLFdBQ0VILE9BQU8yQyxpQkFBaUIsUUFBUzVFLEtBQUtnSSxpQkFDdENoSSxLQUFLQyxLQUFLMkUsaUJBQWlCLFFBQVM1RSxLQUFLaUcsWUFDM0MsQ0FFQTFELGFBQ0VOLE9BQU80QyxvQkFBb0IsUUFBUzdFLEtBQUtnSSxpQkFDekNoSSxLQUFLQyxLQUFLNEUsb0JBQW9CLFFBQVM3RSxLQUFLaUcsWUFDOUMsR0R0S00sQ0FBRWhHLEtBQU1SLEVBQVNFLFNBQVUsU0FBVThCLFlBQWEsTSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYnRvb25zLXNlYXJjaC8uL3NyYy91dGlscy9kb20vaW5kZXgudHMiLCJ3ZWJwYWNrOi8vd2VidG9vbnMtc2VhcmNoLy4vc3JjL2NvbXBvbmVudHMvY29yZS9Db21wb25lbnQudHMiLCJ3ZWJwYWNrOi8vd2VidG9vbnMtc2VhcmNoLy4vc3JjL3V0aWxzL3N0b3JhZ2UvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vd2VidG9vbnMtc2VhcmNoLy4vc3JjL2NvbXBvbmVudHMvc2VhcmNoL1NlYXJjaElucHV0L1NlYXJjaElucHV0Lm1vZHVsZS5zY3NzPzE0NzEiLCJ3ZWJwYWNrOi8vd2VidG9vbnMtc2VhcmNoLy4vc3JjL2NvbXBvbmVudHMvc2VhcmNoL1NlYXJjaElucHV0L2luZGV4LnRzIiwid2VicGFjazovL3dlYnRvb25zLXNlYXJjaC8uL3NyYy9jb21wb25lbnRzL3NlYXJjaC9TZWFyY2hSZXN1bHQvU2VhcmNoUmVzdWx0Lm1vZHVsZS5zY3NzPzFhYjkiLCJ3ZWJwYWNrOi8vd2VidG9vbnMtc2VhcmNoLy4vc3JjL2NvbXBvbmVudHMvc2VhcmNoL1NlYXJjaFJlc3VsdC9pbmRleC50cyIsIndlYnBhY2s6Ly93ZWJ0b29ucy1zZWFyY2gvLi9zcmMvY29tcG9uZW50cy9zZWFyY2gvU2VhcmNoSXRlbUluZm8vaW5kZXgudHMiLCJ3ZWJwYWNrOi8vd2VidG9vbnMtc2VhcmNoLy4vc3JjL21haW4udHMiLCJ3ZWJwYWNrOi8vd2VidG9vbnMtc2VhcmNoLy4vc3JjL0FwcC50cyIsIndlYnBhY2s6Ly93ZWJ0b29ucy1zZWFyY2gvLi9zcmMvdXRpbHMvaGVscGVycy9pbmRleC50cyIsIndlYnBhY2s6Ly93ZWJ0b29ucy1zZWFyY2gvLi9zcmMvYXBpL2luZGV4LnRzIiwid2VicGFjazovL3dlYnRvb25zLXNlYXJjaC8uL3NyYy9jb25zdGFudHMvYXBpLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHNlbGVjdEVsID0gKFxuICBzY29wZTogRWxlbWVudCB8IERvY3VtZW50ID0gZG9jdW1lbnQsXG4gIHNlbGVjdG9yOiBzdHJpbmdcbik6IEVsZW1lbnQgPT4ge1xuICByZXR1cm4gc2NvcGUucXVlcnlTZWxlY3RvcihzZWxlY3Rvcilcbn1cblxuY29uc3Qgc2VsZWN0QWxsID0gKHsgc2NvcGUsIHNlbGVjdG9yIH06IElTZWxlY3RUeXBlKTogRWxlbWVudFtdID0+IHtcbiAgcmV0dXJuIEFycmF5LmZyb20oc2NvcGUucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpXG59XG5cbmNvbnN0IGNyZWF0ZUVsID0gKHRhZ05hbWU6IHN0cmluZyk6IEVsZW1lbnQgPT4ge1xuICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKVxufVxuXG5mdW5jdGlvbiBDb252ZXJ0VGVtcGxhdGVUb0NvbXBvbmVudCh0aGlzOiBhbnkpOiB2b2lkIHtcbiAgY29uc3Qgb2xkTm9kZSA9IHRoaXMubm9kZVxuICBjb25zdCBjb21wb25lbnRDaGlsZHJlbiA9IEFycmF5LmZyb20oXG4gICAgbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyh0aGlzLnRlbXBsYXRlKCksICd0ZXh0L2h0bWwnKS5ib2R5LmNoaWxkcmVuXG4gIClcbiAgY29uc3QgY29tcG9uZW50ID0gbmV3IERvY3VtZW50RnJhZ21lbnQoKVxuICBjb21wb25lbnQuYXBwZW5kKC4uLmNvbXBvbmVudENoaWxkcmVuKVxuXG4gIG9sZE5vZGUuYWZ0ZXIoY29tcG9uZW50KVxuICB0aGlzLm5vZGUgPSBvbGROb2RlLm5leHRTaWJsaW5nXG5cbiAgY29uc3Qgb2xkQ1NTID0gb2xkTm9kZS5jbGFzc0xpc3QudmFsdWUudHJpbSgpXG4gIGNvbnN0IG5ld0NTUyA9IHRoaXMubm9kZS5jbGFzc0xpc3QudmFsdWUudHJpbSgpXG4gIGNvbnN0IGlzQ2hhbmdlZENTUyA9IG9sZENTUyAhPT0gbmV3Q1NTXG4gIGNvbnN0IGNzc1ZhbHVlID0gaXNDaGFuZ2VkQ1NTID8gbmV3Q1NTIHx8IG9sZENTUyA6IG9sZENTU1xuXG4gIGlmICghY3NzVmFsdWUpIHtcbiAgICBvbGROb2RlLnJlbW92ZSgpXG4gICAgcmV0dXJuXG4gIH1cblxuICB0aGlzLm5vZGUuY2xhc3NOYW1lID0gY3NzVmFsdWVcblxuICBvbGROb2RlLnJlbW92ZSgpXG59XG5cbmV4cG9ydCB7IGNyZWF0ZUVsLCBzZWxlY3RFbCwgc2VsZWN0QWxsLCBDb252ZXJ0VGVtcGxhdGVUb0NvbXBvbmVudCB9XG5cbmludGVyZmFjZSBJU2VsZWN0VHlwZSB7XG4gIHNjb3BlOiBFbGVtZW50IHwgRG9jdW1lbnRcbiAgc2VsZWN0b3I6IHN0cmluZ1xufVxuIiwiaW1wb3J0IHsgQ29udmVydFRlbXBsYXRlVG9Db21wb25lbnQgfSBmcm9tICdAdXRpbHMnXG5pbXBvcnQgeyBzZXRJdGVtIH0gZnJvbSAnQHV0aWxzL3N0b3JhZ2UnXG5cbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIENvbXBvbmVudDxTdGF0ZVR5cGU+IHtcbiAgbm9kZTogRWxlbWVudFxuICBpbml0YWxTdGF0ZTogU3RhdGVUeXBlXG4gIHJlbmRlclN0YXRlS2V5OiBTZXQ8c3RyaW5nPlxuICBzdWJzY3JpYmVyczogU2V0PGFueT5cbiAgaXNOZWVkUmVuZGVyOiBib29sZWFuXG4gIGlzTmVlZFVwZGF0ZTogYm9vbGVhblxuICBjb25zdHJ1Y3Rvcih7XG4gICAgbm9kZSxcbiAgICBpbml0YWxTdGF0ZSxcbiAgICByZW5kZXJTdGF0ZUtleSA9IFtdXG4gIH06IElDb21wb25lbnRQcm9wczxTdGF0ZVR5cGU+KSB7XG4gICAgdGhpcy5ub2RlID0gbm9kZVxuICAgIHRoaXMuaW5pdGFsU3RhdGUgPSBpbml0YWxTdGF0ZVxuICAgIHRoaXMucmVuZGVyU3RhdGVLZXkgPSBuZXcgU2V0KHJlbmRlclN0YXRlS2V5KVxuICAgIHRoaXMuc3Vic2NyaWJlcnMgPSBuZXcgU2V0KFtdKVxuICAgIHRoaXMuaXNOZWVkUmVuZGVyID0gZmFsc2VcbiAgICB0aGlzLmlzTmVlZFVwZGF0ZSA9IGZhbHNlXG5cbiAgICB0aGlzLnNldHVwKClcbiAgICB0aGlzLnJlbmRlcigpXG4gIH1cblxuICBzZXR1cCgpOiB2b2lkIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIHJlbmRlcigpOiB2b2lkIHtcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIENvbnZlcnRUZW1wbGF0ZVRvQ29tcG9uZW50LmNhbGwodGhpcylcbiAgICAgIHRoaXMuc2V0RXZlbnQoKVxuICAgICAgdGhpcy5yZW5kZXJDaGlsZENvbXBvbmVudCgpXG4gICAgfSlcbiAgfVxuXG4gIHVwZGF0ZXIoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmlzTmVlZFJlbmRlcikge1xuICAgICAgdGhpcy5yZW5kZXJDaGlsZENvbXBvbmVudCgpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB0aGlzLmNsZWFyRXZlbnQoKVxuICAgIHRoaXMucmVuZGVyKClcbiAgfVxuXG4gIHJlbmRlckNoaWxkQ29tcG9uZW50KCk6IHZvaWQge1xuICAgIHJldHVyblxuICB9XG5cbiAgc2V0RXZlbnQoKTogdm9pZCB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBjbGVhckV2ZW50KCk6IHZvaWQge1xuICAgIHJldHVyblxuICB9XG5cbiAgdGVtcGxhdGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIHN1YnNjcmliZSguLi5zdWJzY3JpYmVyczogYW55W10pOiB2b2lkIHtcbiAgICBzdWJzY3JpYmVycy5mb3JFYWNoKHN1YnNjcmliZXIgPT4ge1xuICAgICAgdGhpcy5zdWJzY3JpYmVycy5hZGQoc3Vic2NyaWJlcilcbiAgICB9KVxuICB9XG5cbiAgbm90aWZ5KG5ld1N0YXRlOiBhbnkpOiB2b2lkIHtcbiAgICBjb25zdCBzdWJzY3JpYmVycyA9IEFycmF5LmZyb20odGhpcy5zdWJzY3JpYmVycylcblxuICAgIHN1YnNjcmliZXJzLmZvckVhY2goc3Vic2NyaWJlciA9PiB7XG4gICAgICBzdWJzY3JpYmVyLnNldFN0YXRlKG5ld1N0YXRlKVxuICAgICAgc3Vic2NyaWJlci51cGRhdGVyKClcbiAgICAgIHN1YnNjcmliZXIuaXNOZWVkUmVuZGVyID0gZmFsc2VcbiAgICB9KVxuICB9XG5cbiAgc2V0U3RhdGUobmV3U3RhdGU6IGFueSk6IHZvaWQge1xuICAgIHRoaXMuY2hlY2tVcGRhdGFTdGF0ZShuZXdTdGF0ZSlcblxuICAgIGlmICghdGhpcy5pc05lZWRVcGRhdGUpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRoaXMucmVmbGVjdE5lZWRSZW5kZXIobmV3U3RhdGUpXG4gICAgdGhpcy5yZWZsZWN0U3RhdGUobmV3U3RhdGUpXG4gICAgdGhpcy5ub3RpZnkobmV3U3RhdGUpXG5cbiAgICBzZXRJdGVtKCdzZWFyY2hTdGF0ZScsIHRoaXMuaW5pdGFsU3RhdGUpXG4gIH1cblxuICBjaGVja1VwZGF0YVN0YXRlKG5ld1N0YXRlOiBhbnkpOiB2b2lkIHtcbiAgICBjb25zdCBjdXJyZW50U3RhdGUgPSBKU09OLnN0cmluZ2lmeSh7IC4uLnRoaXMuaW5pdGFsU3RhdGUgfSlcbiAgICBjb25zdCBuZXh0U3RhdGUgPSBKU09OLnN0cmluZ2lmeSh7IC4uLnRoaXMuaW5pdGFsU3RhdGUsIC4uLm5ld1N0YXRlIH0pXG5cbiAgICB0aGlzLmlzTmVlZFVwZGF0ZSA9IGN1cnJlbnRTdGF0ZSAhPT0gbmV4dFN0YXRlXG4gIH1cblxuICByZWZsZWN0TmVlZFJlbmRlcihuZXdTdGF0ZTogYW55KTogdm9pZCB7XG4gICAgY29uc3QgdXBkYXRlZFN0YXRlS2V5cyA9IE9iamVjdC5rZXlzKG5ld1N0YXRlKVxuICAgIGNvbnN0IHJlbmRlclN0YXRlS2V5ID0gQXJyYXkuZnJvbSh0aGlzLnJlbmRlclN0YXRlS2V5KVxuXG4gICAgY29uc3Qgc3RhdGUgPSB1cGRhdGVkU3RhdGVLZXlzLmZpbHRlcihrZXkgPT4gcmVuZGVyU3RhdGVLZXkuaW5jbHVkZXMoa2V5KSlcbiAgICB0aGlzLmlzTmVlZFJlbmRlciA9IHN0YXRlLmxlbmd0aCA9PT0gMFxuICB9XG5cbiAgcmVmbGVjdFN0YXRlKG5ld1N0YXRlOiBhbnkpOiB2b2lkIHtcbiAgICBjb25zdCB1cGRhdGVkU3RhdGVLZXlzID0gT2JqZWN0LmtleXMobmV3U3RhdGUpXG5cbiAgICB1cGRhdGVkU3RhdGVLZXlzLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIGNvbnN0IHN0YXRlS2V5ID0ga2V5IGFzIGtleW9mIFN0YXRlVHlwZVxuICAgICAgdGhpcy5pbml0YWxTdGF0ZVtzdGF0ZUtleV0gPSBuZXdTdGF0ZVtcbiAgICAgICAgc3RhdGVLZXlcbiAgICAgIF0gYXMgU3RhdGVUeXBlW2tleW9mIFN0YXRlVHlwZV1cbiAgICB9KVxuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUNvbXBvbmVudFByb3BzPFN0YXRlVHlwZT4ge1xuICBub2RlOiBFbGVtZW50XG4gIGluaXRhbFN0YXRlOiBTdGF0ZVR5cGUgfCBudWxsXG4gIHJlbmRlclN0YXRlS2V5Pzogc3RyaW5nW11cbn1cbiIsImNvbnN0IHNldEl0ZW0gPSAoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpOiB2b2lkID0+IHtcbiAgdHJ5IHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYOyggOyepeydtCDrkJjsp4Ag7JWK7JWY7Iq164uI64ukIWApXG4gIH1cbn1cblxuY29uc3QgZ2V0SXRlbSA9IChrZXk6IHN0cmluZyk6IGFueSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdmFsdWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpXG4gICAgcmV0dXJuIHZhbHVlID8gSlNPTi5wYXJzZSh2YWx1ZSkgOiBbXVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihlcnJvcilcbiAgfVxufVxuXG5leHBvcnQgeyBzZXRJdGVtLCBnZXRJdGVtIH1cbiIsIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpblxuZXhwb3J0IGRlZmF1bHQge1wiU2VhcmNoSW5wdXRfX2lucHV0XCI6XCJvWkZkUzhBTWpSNVJNWXlCTnZLVlwifTsiLCJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAY29tcG9uZW50cydcbmltcG9ydCBzdHlsZXMgZnJvbSAnLi9TZWFyY2hJbnB1dC5tb2R1bGUuc2NzcydcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VhcmNoSW5wdXQgZXh0ZW5kcyBDb21wb25lbnQ8SVNlYXJjaElucHV0U3RhdGU+IHtcbiAgaGFuZGxlSW5wdXQ6IChlOiBhbnkpID0+IHZvaWRcbiAgaGFuZGxlRm9jdXM6ICgpID0+IHZvaWRcbiAgdGVtcGxhdGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCB7IFNlYXJjaElucHV0X19pbnB1dCB9ID0gc3R5bGVzXG4gICAgY29uc3QgeyBrZXl3b3JkIH0gPSB0aGlzLmluaXRhbFN0YXRlXG5cbiAgICByZXR1cm4gYFxuICAgICAgPGlucHV0IGNsYXNzPScke1NlYXJjaElucHV0X19pbnB1dH0nIHR5cGU9J3RleHQnIHBsYWNlaG9sZGVyPSfsm7ntiLDsoJzrqqksIOyekeqwgOydtOumhOycvOuhnCDqsoDsg4knIHZhbHVlPScke2tleXdvcmR9Jy8+XG4gICAgYFxuICB9XG5cbiAgc2V0dXAoKTogdm9pZCB7XG4gICAgY29uc3QgeyBvbklucHV0IH0gPSB0aGlzLmluaXRhbFN0YXRlXG5cbiAgICB0aGlzLmhhbmRsZUlucHV0ID0gKGUpOiB2b2lkID0+IHtcbiAgICAgIG9uSW5wdXQoZS50YXJnZXQudmFsdWUpXG4gICAgfVxuXG4gICAgdGhpcy5oYW5kbGVGb2N1cyA9ICgpOiB2b2lkID0+IHtcbiAgICAgIGNvbnN0ICRpbnB1dCA9IHRoaXMubm9kZSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgICAkaW5wdXQuZm9jdXMoKVxuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50KCk6IHZvaWQge1xuICAgIHRoaXMubm9kZS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHRoaXMuaGFuZGxlSW5wdXQpXG4gICAgdGhpcy5oYW5kbGVGb2N1cygpXG4gIH1cblxuICBjbGVhckV2ZW50KCk6IHZvaWQge1xuICAgIHRoaXMubm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdpbnB1dCcsIHRoaXMuaGFuZGxlSW5wdXQpXG4gIH1cbn1cblxuaW50ZXJmYWNlIElTZWFyY2hJbnB1dFN0YXRlIHtcbiAga2V5d29yZDogc3RyaW5nXG4gIG9uSW5wdXQ/KGtleXdvcmQ6IHN0cmluZyk6IHZvaWRcbn1cbiIsIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpblxuZXhwb3J0IGRlZmF1bHQge1wicmVzdWx0X2xpc3RcIjpcImhqQ2RjbzI3bEpKVG8yb3lSTjV3XCIsXCJzZWxlY3RlZFwiOlwieXFCcVd4aVI5QVN0R0I1OHJMZlNcIixcIm1hdGNoZWRcIjpcIk9BZjVKd2tEOW9TT0pXcGxXS18wXCJ9OyIsImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0Bjb21wb25lbnRzJ1xuaW1wb3J0IHN0eWxlcyBmcm9tICcuL1NlYXJjaFJlc3VsdC5tb2R1bGUuc2NzcydcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VhcmNoUmVzdWx0IGV4dGVuZHMgQ29tcG9uZW50PElTZWFyY2hSZXN1bHRTdGF0ZT4ge1xuICBoYW5kbGVDbGljazogKHNlbGVjdGVkSXRlbTogYW55KSA9PiB2b2lkXG4gIGdldFNjcm9sbFBvaXNpdGlvbjogKCkgPT4gdm9pZFxuICB0ZW1wbGF0ZSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHsgc2VsZWN0ZWRJbmRleCwgaXNSZXN1bHRMaXN0VmlzaWFibGUsIGxpc3REYXRhLCBrZXl3b3JkIH0gPVxuICAgICAgdGhpcy5pbml0YWxTdGF0ZVxuICAgIGNvbnN0IHsgcmVzdWx0X2xpc3QsIHNlbGVjdGVkLCBtYXRjaGVkIH0gPSBzdHlsZXNcblxuICAgIGNvbnN0IG1hdGNoS2V5d29yZCA9IChpdGVtOiBhbnksIGtleXdvcmQ6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gICAgICBpZiAoIWl0ZW0uaW5jbHVkZXMoa2V5d29yZCkpIHtcbiAgICAgICAgcmV0dXJuIGl0ZW1cbiAgICAgIH1cblxuICAgICAgY29uc3QgbWF0Y2hUZXh0ID0gaXRlbS5tYXRjaChuZXcgUmVnRXhwKGtleXdvcmQsICdnaScpKVswXVxuXG4gICAgICByZXR1cm4gaXRlbS5yZXBsYWNlKFxuICAgICAgICBuZXcgUmVnRXhwKG1hdGNoVGV4dCwgJ2dpJyksXG4gICAgICAgIGA8c3BhbiBjbGFzcz0nJHttYXRjaGVkfSc+JHttYXRjaFRleHR9PC9zcGFuPmBcbiAgICAgIClcbiAgICB9XG5cbiAgICByZXR1cm4gYFxuICAgICAgPHVsIGNsYXNzPScke1xuICAgICAgICBpc1Jlc3VsdExpc3RWaXNpYWJsZSA/IGAke3Jlc3VsdF9saXN0fWAgOiAnaGlkZSdcbiAgICAgIH0nPiR7QXJyYXkuZnJvbShsaXN0RGF0YSlcbiAgICAgID8ubWFwKFxuICAgICAgICAoaXRlbSwgaW5kZXgpID0+XG4gICAgICAgICAgYDxsaSBjbGFzcz0nJHtcbiAgICAgICAgICAgIGluZGV4ID09PSBzZWxlY3RlZEluZGV4ID8gYCR7c2VsZWN0ZWR9YCA6ICcnXG4gICAgICAgICAgfScgZGF0YS1pbmRleD0nJHtpbmRleH0nPlxuICAgICAgICAgICAgICA8c3Bhbj4ke21hdGNoS2V5d29yZChpdGVtLnRpdGxlLCBrZXl3b3JkKX08L3NwYW4+XG4gICAgICAgICAgICAgIDxzcGFuPlsgJHttYXRjaEtleXdvcmQoaXRlbS5hdXRob3IsIGtleXdvcmQpfSBdIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvbGk+YFxuICAgICAgKVxuICAgICAgLmpvaW4oJycpfVxuICAgICAgPC91bD5cbiAgICBgXG4gIH1cblxuICBzZXR1cCgpOiB2b2lkIHtcbiAgICBjb25zdCB7IG9uQ2xpY2sgfSA9IHRoaXMuaW5pdGFsU3RhdGVcblxuICAgIHRoaXMuaGFuZGxlQ2xpY2sgPSAoZSk6IHZvaWQgPT4ge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICAgIGNvbnN0ICRsaSA9IHRhcmdldC5jbG9zZXN0KCdsaScpXG4gICAgICBpZiAoJGxpKSB7XG4gICAgICAgIGNvbnN0IHsgaW5kZXggfSA9ICRsaS5kYXRhc2V0XG4gICAgICAgIG9uQ2xpY2sodGhpcy5pbml0YWxTdGF0ZS5saXN0RGF0YVtwYXJzZUludChpbmRleCldLCBpbmRleClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzZXRFdmVudCgpOiB2b2lkIHtcbiAgICB0aGlzLm5vZGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZUNsaWNrKVxuXG4gICAgY29uc3QgeyBzZWxlY3RlZEluZGV4IH0gPSB0aGlzLmluaXRhbFN0YXRlXG5cbiAgICBjb25zdCB0ZW1wID0gNDAuNSAvL2xpIHNpemVcbiAgICBpZiAoKHNlbGVjdGVkSW5kZXggPiAwICYmIHNlbGVjdGVkSW5kZXggPD0gMykgfHwgc2VsZWN0ZWRJbmRleCA9PT0gMCkge1xuICAgICAgdGhpcy5ub2RlLnNjcm9sbFRvKDAsIDApXG4gICAgfVxuXG4gICAgaWYgKHNlbGVjdGVkSW5kZXggPiAzKSB7XG4gICAgICB0aGlzLm5vZGUuc2Nyb2xsVG8oMCwgdGVtcCAqIChzZWxlY3RlZEluZGV4IC0gMykpXG4gICAgfVxuICB9XG5cbiAgY2xlYXJFdmVudCgpOiB2b2lkIHtcbiAgICB0aGlzLm5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZUNsaWNrKVxuICB9XG59XG5cbmludGVyZmFjZSBJU2VhcmNoUmVzdWx0U3RhdGUge1xuICBpc1Jlc3VsdExpc3RWaXNpYWJsZTogYm9vbGVhblxuICBzZWxlY3RlZEluZGV4OiBudW1iZXJcbiAgbGlzdERhdGE6IElJdGVtW11cbiAga2V5d29yZDogc3RyaW5nXG4gIG9uQ2xpY2soc2VsZWN0ZWRJdGVtOiBhbnksIGluZGV4OiBzdHJpbmcpOiB2b2lkXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUl0ZW0ge1xuICB3ZWJ0b29uSWQ6IG51bWJlclxuICB0aXRsZTogc3RyaW5nXG4gIGF1dGhvcjogc3RyaW5nXG4gIGltZzogc3RyaW5nXG4gIHNlcnZpY2U6IHN0cmluZ1xuICB1cGRhdGVEYXlzOiBzdHJpbmdbXVxuICB1cmw6IHN0cmluZ1xufVxuIiwiaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGNvbXBvbmVudHMnXG5pbXBvcnQgdHlwZSB7IElJdGVtIH0gZnJvbSAnLi4vU2VhcmNoUmVzdWx0J1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWFyY2hJdGVtSW5mbyBleHRlbmRzIENvbXBvbmVudDxJU2VhcmNoSXRlbUluZm9TdGF0ZT4ge1xuICB0ZW1wbGF0ZSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHsgaXNNb2RhbFZpc2lhYmxlLCBzZWxlY3RlZEl0ZW0gfSA9IHRoaXMuaW5pdGFsU3RhdGVcbiAgICByZXR1cm4gYFxuICAgIDxkaXYgY2xhc3M9JyR7aXNNb2RhbFZpc2lhYmxlID8gYGl0ZW1faW5mb2AgOiAnaGlkZSd9JyA+XG4gICAgICA8ZGl2IGNsYXNzPSdtb2RhbCc+XG4gICAgICAgIDxidXR0b24+WDwvYnV0dG9uPiBcbiAgICAgICAgPGEgaHJlZj0nJHtzZWxlY3RlZEl0ZW0udXJsfScgdGFyZ2V0PSdfYmxhbmsnPlxuICAgICAgICAgIDxpbWcgc3JjPScke3NlbGVjdGVkSXRlbS5pbWd9JyAvPlxuICAgICAgICA8L2E+XG4gICAgICAgIDxwPuybue2IsCDsoJzrqqk6ICR7c2VsZWN0ZWRJdGVtLnRpdGxlfTwvcD5cbiAgICAgICAgPHA+7J6R6rCAOiAke3NlbGVjdGVkSXRlbS5hdXRob3J9PC9wPlxuICAgICAgICA8cD7sl7Dsnqwg7IKs7J207Yq4OiAke3NlbGVjdGVkSXRlbS5zZXJ2aWNlfTwvcD5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICAgIGBcbiAgfVxufVxuXG5pbnRlcmZhY2UgSVNlYXJjaEl0ZW1JbmZvU3RhdGUge1xuICBzZWxlY3RlZEl0ZW06IElJdGVtXG4gIGlzTW9kYWxWaXNpYWJsZTogYm9vbGVhblxufVxuIiwiaW1wb3J0IHsgc2VsZWN0RWwgfSBmcm9tICdAdXRpbHMnXG5pbXBvcnQgQXBwIGZyb20gJ0FwcCdcbmltcG9ydCAnLi9zY3NzL2luZGV4LnNjc3MnXG5cbm5ldyBBcHAoeyBub2RlOiBzZWxlY3RFbChkb2N1bWVudCwgJyNyb290JyksIGluaXRhbFN0YXRlOiBudWxsIH0pXG4iLCJpbXBvcnQgeyBhcGkgfSBmcm9tICdAYXBpJ1xuaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBTZWFyY2hJbnB1dCxcbiAgU2VhcmNoUmVzdWx0LFxuICBTZWFyY2hJdGVtSW5mb1xufSBmcm9tICdAY29tcG9uZW50cydcbmltcG9ydCB0eXBlIHsgSUNvbXBvbmVudFByb3BzIH0gZnJvbSAnQGNvbXBvbmVudHMvY29yZS9Db21wb25lbnQnXG5pbXBvcnQgdHlwZSB7IElJdGVtIH0gZnJvbSAnQGNvbXBvbmVudHMvc2VhcmNoL1NlYXJjaFJlc3VsdCdcbmltcG9ydCB7IGRlYm91bmNlLCBzZWxlY3RFbCB9IGZyb20gJ0B1dGlscydcbmltcG9ydCB7IGdldEl0ZW0gfSBmcm9tICdAdXRpbHMvc3RvcmFnZSdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBwIGV4dGVuZHMgQ29tcG9uZW50PElBcHBTdGF0ZT4ge1xuICBoYW5kbGVDaGFuZ2U6IChrZXl3b3JkOiBzdHJpbmcpID0+IHZvaWRcbiAgaGFuZGxlS2V5Q2hhbmdlOiAoZTogYW55KSA9PiB2b2lkXG4gIGhhbmRsZUNsaWNrOiAoZTogYW55KSA9PiB2b2lkXG4gIGNvbnN0cnVjdG9yKHsgbm9kZSB9OiBJQ29tcG9uZW50UHJvcHM8SUFwcFN0YXRlPikge1xuICAgIGNvbnN0IGluaXRhbFN0YXRlID0ge1xuICAgICAga2V5d29yZDogJycsXG4gICAgICBzZWxlY3RlZEluZGV4OiAwLFxuICAgICAgbGlzdERhdGE6IFtdLFxuICAgICAgc2VsZWN0ZWRJdGVtOiB7fSxcbiAgICAgIGlzUmVzdWx0TGlzdFZpc2lhYmxlOiBmYWxzZSxcbiAgICAgIGlzTW9kYWxWaXNpYWJsZTogZmFsc2VcbiAgICB9IGFzIElBcHBTdGF0ZVxuXG4gICAgc3VwZXIoeyBub2RlLCBpbml0YWxTdGF0ZSB9KVxuICB9XG5cbiAgc2V0dXAoKTogdm9pZCB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IC4uLnRoaXMuaW5pdGFsU3RhdGUsIC4uLmdldEl0ZW0oJ3NlYXJjaFN0YXRlJykgfSlcbiAgICB0aGlzLmhhbmRsZUNoYW5nZSA9IGRlYm91bmNlKGFzeW5jIChrZXl3b3JkKTogUHJvbWlzZTxhbnk+ID0+IHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tY29uZnVzaW5nLXZvaWQtZXhwcmVzc2lvblxuICAgICAgY29uc3QgbGlzdERhdGEgPSBhd2FpdCBhcGkuZ2V0V2ViVG9vbkxpc3Qoa2V5d29yZClcbiAgICAgIGlmICgha2V5d29yZCB8fCAhbGlzdERhdGEubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIGlzUmVzdWx0TGlzdFZpc2lhYmxlOiBmYWxzZSxcbiAgICAgICAgICBzZWxlY3RlZEluZGV4OiAwLFxuICAgICAgICAgIGtleXdvcmQ6ICcnLFxuICAgICAgICAgIGxpc3REYXRhOiBbXSxcbiAgICAgICAgICBzZWxlY3RlZEl0ZW06IHt9XG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBpc1Jlc3VsdExpc3RWaXNpYWJsZTogdHJ1ZSxcbiAgICAgICAgICBsaXN0RGF0YTogbGlzdERhdGEsXG4gICAgICAgICAga2V5d29yZDoga2V5d29yZFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0sIDIwMClcblxuICAgIHRoaXMuaGFuZGxlS2V5Q2hhbmdlID0gKGUpOiB2b2lkID0+IHtcbiAgICAgIGNvbnN0IHsgbGlzdERhdGEsIHNlbGVjdGVkSW5kZXggfSA9IHRoaXMuaW5pdGFsU3RhdGVcbiAgICAgIGNvbnN0IGFjdGlvbktleXMgPSBbJ0Fycm93VXAnLCAnQXJyb3dEb3duJywgJ0VudGVyJywgJ0VzY2FwZSddXG5cbiAgICAgIGlmIChhY3Rpb25LZXlzLmluY2x1ZGVzKGUua2V5KSAmJiAhbGlzdERhdGEubGVuZ3RoKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCBsYXN0SW5kZXggPSBsaXN0RGF0YS5sZW5ndGggLSAxXG4gICAgICBsZXQgbmV4dEluZGV4ID0gc2VsZWN0ZWRJbmRleFxuXG4gICAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgIGNhc2UgJ0Fycm93VXAnOlxuICAgICAgICAgIG5leHRJbmRleCA9IHNlbGVjdGVkSW5kZXggPT09IDAgPyBsYXN0SW5kZXggOiBuZXh0SW5kZXggLSAxXG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzZWxlY3RlZEluZGV4OiBuZXh0SW5kZXhcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ0Fycm93RG93bic6XG4gICAgICAgICAgbmV4dEluZGV4ID0gc2VsZWN0ZWRJbmRleCA9PT0gbGFzdEluZGV4ID8gMCA6IG5leHRJbmRleCArIDFcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHNlbGVjdGVkSW5kZXg6IG5leHRJbmRleFxuICAgICAgICAgIH0pXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnRW50ZXInOlxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc2VsZWN0ZWRJdGVtOiBsaXN0RGF0YVtzZWxlY3RlZEluZGV4XSxcbiAgICAgICAgICAgIGlzTW9kYWxWaXNpYWJsZTogdHJ1ZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnRXNjYXBlJzpcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGlzTW9kYWxWaXNpYWJsZTogZmFsc2VcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5oYW5kbGVDbGljayA9IChlKTogdm9pZCA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIGUudGFyZ2V0LmNsb3Nlc3QoJ2J1dHRvbicpIHx8XG4gICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaXRlbV9pbmZvJylcbiAgICAgICkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBpc01vZGFsVmlzaWFibGU6IGZhbHNlXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdGVtcGxhdGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFxuICAgICAgPG1haW4gaWQ9J3Jvb3QnPlxuICAgICAgICA8aGVhZGVyIGNsYXNzPSdoZWFkZXInPldlYnRvb25zIFNlYXJjaDwvaGVhZGVyPlxuICAgICAgICA8ZGl2IGNsYXNzPSdjb250YWluZXInPlxuICAgICAgICAgIDxTZWFyY2hJbnB1dD48L1NlYXJjaElucHV0PlxuICAgICAgICAgIDxTZWFyY2hSZXN1bHRMaXN0PjwvU2VhcmNoUmVzdWx0TGlzdD5cbiAgICAgICAgICA8U2VhcmNoSXRlbUluZm8+PC9TZWFyY2hJdGVtSW5mbz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L21haW4+XG4gIGBcbiAgfVxuXG4gIHJlbmRlckNoaWxkQ29tcG9uZW50KCk6IHZvaWQge1xuICAgIGNvbnN0IHtcbiAgICAgIGtleXdvcmQsXG4gICAgICBzZWxlY3RlZEluZGV4LFxuICAgICAgbGlzdERhdGEsXG4gICAgICBpc1Jlc3VsdExpc3RWaXNpYWJsZSxcbiAgICAgIHNlbGVjdGVkSXRlbSxcbiAgICAgIGlzTW9kYWxWaXNpYWJsZVxuICAgIH0gPSB0aGlzLmluaXRhbFN0YXRlXG5cbiAgICBuZXcgU2VhcmNoSW5wdXQoe1xuICAgICAgbm9kZTogc2VsZWN0RWwodGhpcy5ub2RlLCAnU2VhcmNoSW5wdXQnKSxcbiAgICAgIGluaXRhbFN0YXRlOiB7XG4gICAgICAgIGtleXdvcmQ6IHRoaXMuaW5pdGFsU3RhdGUua2V5d29yZCxcbiAgICAgICAgb25JbnB1dDogdGhpcy5oYW5kbGVDaGFuZ2VcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgY29uc3Qgc2VhcmNoUmVzdWx0ID0gbmV3IFNlYXJjaFJlc3VsdCh7XG4gICAgICBub2RlOiBzZWxlY3RFbCh0aGlzLm5vZGUsICdTZWFyY2hSZXN1bHRMaXN0JyksXG4gICAgICBpbml0YWxTdGF0ZToge1xuICAgICAgICBrZXl3b3JkLFxuICAgICAgICBsaXN0RGF0YSxcbiAgICAgICAgaXNSZXN1bHRMaXN0VmlzaWFibGUsXG4gICAgICAgIHNlbGVjdGVkSW5kZXgsXG4gICAgICAgIG9uQ2xpY2s6IChzZWxlY3RlZEl0ZW06IGFueSwgaW5kZXg6IHN0cmluZyk6IHZvaWQgPT4ge1xuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc2VsZWN0ZWRJdGVtOiBzZWxlY3RlZEl0ZW0sXG4gICAgICAgICAgICBpc01vZGFsVmlzaWFibGU6IHRydWUsXG4gICAgICAgICAgICBzZWxlY3RlZEluZGV4OiBOdW1iZXIoaW5kZXgpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBjb25zdCBzZWFyY2hJdGVtSW5mbyA9IG5ldyBTZWFyY2hJdGVtSW5mbyh7XG4gICAgICBub2RlOiBzZWxlY3RFbCh0aGlzLm5vZGUsICdTZWFyY2hJdGVtSW5mbycpLFxuICAgICAgaW5pdGFsU3RhdGU6IHtcbiAgICAgICAgc2VsZWN0ZWRJdGVtLFxuICAgICAgICBpc01vZGFsVmlzaWFibGVcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgdGhpcy5zdWJzY3JpYmUoc2VhcmNoUmVzdWx0KVxuICAgIHRoaXMuc3Vic2NyaWJlKHNlYXJjaEl0ZW1JbmZvKVxuICB9XG5cbiAgc2V0RXZlbnQoKTogdm9pZCB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5oYW5kbGVLZXlDaGFuZ2UpXG4gICAgdGhpcy5ub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVDbGljaylcbiAgfVxuXG4gIGNsZWFyRXZlbnQoKTogdm9pZCB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5oYW5kbGVLZXlDaGFuZ2UpXG4gICAgdGhpcy5ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVDbGljaylcbiAgfVxufVxuXG5pbnRlcmZhY2UgSUFwcFN0YXRlIHtcbiAga2V5d29yZDogc3RyaW5nXG4gIHNlbGVjdGVkSW5kZXg6IG51bWJlclxuICBsaXN0RGF0YTogSUl0ZW1bXVxuICBzZWxlY3RlZEl0ZW06IElJdGVtXG4gIGlzUmVzdWx0TGlzdFZpc2lhYmxlOiBib29sZWFuXG4gIGlzTW9kYWxWaXNpYWJsZTogYm9vbGVhblxufVxuIiwiY29uc3QgZGVib3VuY2U6IElEZWJvdW5jZSA9IChjYWxsYmFjaywgZGVsYXkpID0+IHtcbiAgbGV0IHRpbWVvdXQ6IG51bWJlclxuXG4gIHJldHVybiBldmVudCA9PiB7XG4gICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KVxuICAgIH1cblxuICAgIHRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dChjYWxsYmFjaywgZGVsYXksIGV2ZW50KVxuICB9XG59XG5cbmV4cG9ydCB7IGRlYm91bmNlIH1cblxudHlwZSBJRGVib3VuY2UgPSAoXG4gIGNhbGxiYWNrOiAoZXZlbnQ6IGFueSkgPT4gdm9pZCxcbiAgZGVsYXk6IG51bWJlclxuKSA9PiAoZXZlbnQ6IGFueSkgPT4gdm9pZFxuIiwiaW1wb3J0IHsgQkFTRV9VUkwsIFJFUVVTRVRfTUVTU0FHRSB9IGZyb20gJ0Bjb25zdGFudHMnXG5cbmNvbnN0IHJlcXVzZXQgPSBhc3luYyAodXJsOiBzdHJpbmcpOiBQcm9taXNlPGFueT4gPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKVxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihSRVFVU0VUX01FU1NBR0UuSFRUUF9FUlJPUilcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuICAgIHJldHVybiBkYXRhLndlYnRvb25zXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihgJHtSRVFVU0VUX01FU1NBR0UuU0VSVkVSX0VSUk9SfSAke2Vycm9yLm1lc3NhZ2V9YClcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgYXBpID0ge1xuICBnZXRXZWJUb29uTGlzdDogYXN5bmMgKGtleXdvcmQ6IHN0cmluZyk6IFByb21pc2U8YW55PiA9PlxuICAgIHJlcXVzZXQoYCR7QkFTRV9VUkx9L3NlYXJjaD9rZXl3b3JkPSR7a2V5d29yZH1gKVxufVxuIiwiY29uc3QgQkFTRV9VUkwgPSAnaHR0cHM6Ly9rb3JlYS13ZWJ0b29uLWFwaS5oZXJva3VhcHAuY29tJ1xuY29uc3QgUkVRVVNFVF9NRVNTQUdFID0ge1xuICBIVFRQX0VSUk9SOiAn7ISc67KE7JmA7J2YIOyXsOqysOydtCDrtojslYjsoJXtlanri4jri6QhJyxcbiAgU0VSVkVSX0VSUk9SOiAn7JeQ65+s6rCAIOuwnOyDne2WiOyKteuLiOuLpCEnXG59XG5leHBvcnQgeyBCQVNFX1VSTCwgUkVRVVNFVF9NRVNTQUdFIH1cbiJdLCJuYW1lcyI6WyJzZWxlY3RFbCIsInNjb3BlIiwiZG9jdW1lbnQiLCJzZWxlY3RvciIsInF1ZXJ5U2VsZWN0b3IiLCJDb252ZXJ0VGVtcGxhdGVUb0NvbXBvbmVudCIsIm9sZE5vZGUiLCJ0aGlzIiwibm9kZSIsImNvbXBvbmVudENoaWxkcmVuIiwiQXJyYXkiLCJmcm9tIiwiRE9NUGFyc2VyIiwicGFyc2VGcm9tU3RyaW5nIiwidGVtcGxhdGUiLCJib2R5IiwiY2hpbGRyZW4iLCJjb21wb25lbnQiLCJEb2N1bWVudEZyYWdtZW50IiwiYXBwZW5kIiwiYWZ0ZXIiLCJuZXh0U2libGluZyIsIm9sZENTUyIsImNsYXNzTGlzdCIsInZhbHVlIiwidHJpbSIsIm5ld0NTUyIsImNzc1ZhbHVlIiwiY2xhc3NOYW1lIiwicmVtb3ZlIiwiQ29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJpbml0YWxTdGF0ZSIsInJlbmRlclN0YXRlS2V5IiwiU2V0Iiwic3Vic2NyaWJlcnMiLCJpc05lZWRSZW5kZXIiLCJpc05lZWRVcGRhdGUiLCJzZXR1cCIsInJlbmRlciIsIndpbmRvdyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImNhbGwiLCJzZXRFdmVudCIsInJlbmRlckNoaWxkQ29tcG9uZW50IiwidXBkYXRlciIsImNsZWFyRXZlbnQiLCJzdWJzY3JpYmUiLCJmb3JFYWNoIiwic3Vic2NyaWJlciIsImFkZCIsIm5vdGlmeSIsIm5ld1N0YXRlIiwic2V0U3RhdGUiLCJjaGVja1VwZGF0YVN0YXRlIiwicmVmbGVjdE5lZWRSZW5kZXIiLCJyZWZsZWN0U3RhdGUiLCJrZXkiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsImVycm9yIiwiRXJyb3IiLCJjdXJyZW50U3RhdGUiLCJuZXh0U3RhdGUiLCJ1cGRhdGVkU3RhdGVLZXlzIiwiT2JqZWN0Iiwia2V5cyIsInN0YXRlIiwiZmlsdGVyIiwiaW5jbHVkZXMiLCJsZW5ndGgiLCJzdGF0ZUtleSIsIlNlYXJjaElucHV0IiwiU2VhcmNoSW5wdXRfX2lucHV0Iiwia2V5d29yZCIsIm9uSW5wdXQiLCJoYW5kbGVJbnB1dCIsImUiLCJ0YXJnZXQiLCJoYW5kbGVGb2N1cyIsImZvY3VzIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJTZWFyY2hSZXN1bHQiLCJzZWxlY3RlZEluZGV4IiwiaXNSZXN1bHRMaXN0VmlzaWFibGUiLCJsaXN0RGF0YSIsInJlc3VsdF9saXN0Iiwic2VsZWN0ZWQiLCJtYXRjaGVkIiwibWF0Y2hLZXl3b3JkIiwiaXRlbSIsIm1hdGNoVGV4dCIsIm1hdGNoIiwiUmVnRXhwIiwicmVwbGFjZSIsIm1hcCIsImluZGV4IiwidGl0bGUiLCJhdXRob3IiLCJqb2luIiwib25DbGljayIsImhhbmRsZUNsaWNrIiwiJGxpIiwiY2xvc2VzdCIsImRhdGFzZXQiLCJwYXJzZUludCIsInNjcm9sbFRvIiwiU2VhcmNoSXRlbUluZm8iLCJpc01vZGFsVmlzaWFibGUiLCJzZWxlY3RlZEl0ZW0iLCJ1cmwiLCJpbWciLCJzZXJ2aWNlIiwic3VwZXIiLCJnZXRJdGVtIiwicGFyc2UiLCJoYW5kbGVDaGFuZ2UiLCJjYWxsYmFjayIsImRlbGF5IiwidGltZW91dCIsImV2ZW50IiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsImRlYm91bmNlIiwicmVzcG9uc2UiLCJmZXRjaCIsIm9rIiwianNvbiIsIndlYnRvb25zIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJhcGkiLCJoYW5kbGVLZXlDaGFuZ2UiLCJsYXN0SW5kZXgiLCJuZXh0SW5kZXgiLCJwcmV2ZW50RGVmYXVsdCIsImNvbnRhaW5zIiwic2VhcmNoUmVzdWx0IiwiTnVtYmVyIiwic2VhcmNoSXRlbUluZm8iXSwic291cmNlUm9vdCI6IiJ9